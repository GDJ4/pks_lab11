# Отчёт по практическому занятию №11

## Выполнил: Лазарев Г.С.

## Группа: ЭФБО-10-23

## Цели работы

- Подключить Flutter-приложение к публичному REST API через dio.
- Реализовать слой данных: клиент, репозиторий, модель Note.
- Сделать список заметок с пагинацией, экран деталей, диалог создания/редактирования.
- Обработать сетевые состояния/ошибки и сохранить фирменный UI.

## Ход работы

### Подготовка проекта
- В pubspec.yaml добавлена зависимость dio:^5.7.0, выполнен flutter pub get.

**Структура проекта** 

lib/models/note.dart: модель Note{id,title,body} с fromJson/toJson, tolerant к int/string id.
lib/data/api_client.dart: обёртка над Dio с baseUrl, таймаутами, заголовками, логированием и простым экспоненциальным ретраем для идемпотентных запросов.
lib/data/notes_repository.dart: методы list(page,limit), get(id), create, update, delete для /posts.
lib/pages/notes_page.dart: список заметок с pull-to-refresh, пагинацией по _page/_limit, состояния loading/empty/error, snackbar на ошибки, карточки с переходом в детали, диалог создания (POST + локальное добавление), демо-удаление.
lib/pages/note_details_page.dart: FutureBuilder, AppBar «Запись #id», вывод тела, кнопка «Повторить» при ошибке.
lib/ui/common.dart: палитра, фирменная иконка блокнота.
lib/main.dart: тема, экран входа с брендингом и кнопкой «Войти» -> NotesPage.

### Ключевые моменты реализации

- Пагинация: параметры _page/_limit, подгрузка в футере; _canLoadMore отключает запросы после последней страницы.
- Состояния UX: первичная загрузка — индикатор; пустой список — заглушка с иконкой; ошибки — Snackbar + экран с кнопкой «Повторить».
- Создание: диалог собирает title/body, делает POST (jsonplaceholder отдаёт демо-ответ), элемент сразу вставляется в список с уведомлением.
- Удаление: демо-DELETE + локальное удаление с откатом при ошибке.
- Ретраи: в ApiClient.withRetry для connection/timeout/503, экспоненциальная задержка.

## Ошибки и их решения

- Сетевые таймауты/connectionError: ретраи на идемпотентных запросах + Snackbar.
- Пустой или ошибочный ответ списка: безопасная проверка типов, пустой список без краша.
- Ошибка удаления: элемент возвращается в список, показывается сообщение.

## Скриншоты

<img width="984" height="745" alt="2025-11-28_00-35-16" src="https://github.com/user-attachments/assets/52652228-fbbd-455f-8679-a83c175f204b" />
<img width="947" height="747" alt="2025-11-28_00-35-29" src="https://github.com/user-attachments/assets/1b2b1d6f-274e-4e51-9cfb-14c35273440d" />

